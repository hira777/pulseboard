# コア機能（MVP → 拡張）

## 1. 認証 & RBAC

- Supabase Auth を使ったログイン / ログアウト
- **admin / member** のロール分け（RBAC）
- `/admin` は **admin のみアクセス可**

---

## 2. リアルタイム・メトリクス

- WebSocket 経由でサーバーから KPI（注文数・売上・エラー率など）を push
- ダッシュボードに **KPI カード + イベントフィード** を表示
- ネットワーク切断時は警告 → 自動再接続 → 復帰後に差分反映

---

## 3. 大規模テーブル

- 注文一覧（**5〜10 万件, 6〜10 列程度**）
- サーバ側ページング / ソート / フィルタ / 検索
- 仮想スクロールで **60fps を目標**

---

## 4. リアルタイムチャット

- 単一ルームチャット（MVP）
- presence（入室ユーザー表示）、typing インジケータ
- メッセージ送信は **楽観的更新 → ACK 確定 → 失敗時はリトライ**
- 未読/既読管理、オフライン送信キュー

---

## 5. 通知 & エラー処理

- 重要イベントは **Toast 通知**
- API / WebSocket エラーは **指数バックオフによるリトライ** ＋ フォールバック UI

---

# 非機能要件

- **パフォーマンス**：Core Web Vitals (LCP/CLS/INP) を達成、初期バンドル ≤ 200KB
- **アクセシビリティ**：キーボード操作完結、`aria` 属性 / コントラスト対応
- **型安全**：API / WS Payload を **TypeScript 型 + Zod** でバリデーション
- **テスト**：ユニットテスト + E2E テスト
