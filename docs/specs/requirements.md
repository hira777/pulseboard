# Requirements / Specs

## ユーザーストーリー

- ログインし、自分のプロフィールを確認できる
- admin として全ページを利用できる
- member として制限付きでページを利用できる
- リアルタイムに KPI が更新されるダッシュボードを見たい
- 大規模な注文一覧を快適に検索・スクロールしたい
- チャットで他ユーザーとやり取りしたい（presence, typing 表示）
- エラーや切断があっても UI が復旧することを期待したい

## 機能要件（MVP → 拡張）

1. 認証 & RBAC
   - /login：ログイン
   - admin：全操作可能
   - member：一部操作禁止
2. リアルタイム・メトリクス
   - WebSocket で KPI push
   - イベントフィードを仮想リストで表示
   - ネットワーク切断時は警告・再接続・差分復旧
3. 大規模テーブル
   - 注文一覧（5〜10 万件）
   - サーバ側ページング / ソート / フィルタ / 検索
   - 仮想スクロールで 60fps
4. リアルタイム・チャット
   - presence / typing
   - メッセージ送信は楽観的更新
   - ACK で確定、失敗時リトライ
   - 未読/既読管理
   - オフライン送信キュー
5. 通知 & エラー処理
   - 重要イベントは Toast 通知
   - API/WS エラーはリトライ戦略付き

## 非機能要件

- Core Web Vitals 達成
- 初期バンドル 200KB 以下
- 型安全（TS + Zod）
- テスト（ユニット + E2E）
- A11y（キーボード操作・aria 属性・コントラスト）
